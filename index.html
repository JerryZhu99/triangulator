<!DOCTYPE html>
<html>
<head>
  <title>Simple Map</title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
  <style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
  #map {
    height: 100%;
  }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="controls" style="position:absolute;bottom:50px;left:50px">
    <button onclick="addInRange()">Inside Range</button>
    <button onclick="addOutRange()">Outside Range</button>
  </div>
  <script>
  var position;
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(setPosition);
    } else {
      console.log("Geolocation is not supported by this browser.");
    }
  }
  function setPosition(p){
    position = {lat:p.coords.latitude,lng:p.coords.longitude};
  }
  function addInRange(){
    getLocation();
    var sensorRadius = new google.maps.Circle({
      center:position,
      radius:200,
      strokeColor:"#00FF00",
      strokeOpacity:0.8,
      strokeWeight:1,
      fillColor:"#00FF00",
      fillOpacity:0.05
    });
    sensorRadius.setMap(map);
  }
  function addOutRange(){
    getLocation();
    var sensorRadius = new google.maps.Circle({
      center:position,
      radius:200,
      strokeColor:"#FF0000",
      strokeOpacity:0.8,
      strokeWeight:1,
      fillColor:"#FF0000",
      fillOpacity:0.05
    });
    sensorRadius.setMap(map);
  }
  getLocation();
  var map;
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: position,
      zoom: 18
    });
    var userposition = new google.maps.Marker({
      position:position
    });
    userposition.setMap(map);
    var sensorRadius = new google.maps.Circle({
      center:position,
      radius:200,
      strokeColor:"#0077FF",
      strokeOpacity:0.8,
      strokeWeight:1,
      fillColor:"#0077FF",
      fillOpacity:0.05
    });
    sensorRadius.setMap(map);
    setTimeout(function () {
      getLocation();
      userposition.setPosition(position);
      sensorRadius.setCenter(position);
    }, 10);
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQ1AtoruZSmAVBzt2l_q59yalVJXkYyZo&callback=initMap"
  async defer></script>
</body>
</html>
